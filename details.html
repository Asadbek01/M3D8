<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
<link rel="stylesheet" href="style.css">
    <title>Hello, world!</title>
<style>
  .card{
    height: 87vh;
    margin-top: 20px;
  }
</style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="#">Strivazon</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
      
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
              <a class="nav-link" href="./index.html">Home <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./backOffice.html">BackOffice</a>
            </li>
        </ul>
       </div>
  </nav>
  <img class="detail-img" src="https://media.istockphoto.com/photos/life-planning-concepts-coins-in-bottle-and-generation-scale-picture-id1270710538?b=1&k=20&m=1270710538&s=170667a&w=0&h=OYAzUopLgf4XKQpZDqFh5ucrbAKOdfeBAplamLR-7-c="
  alt="details image"/>

  <div class="container">
    <div class="row">
        <div class="col-6 col-lg-3">
        <div class="item-details">
                 
          <button class = " btn btn-success">Edit item</button>
`
        </div>
    </div>
</div>
</div>
 

  <script>
    const itemId = new URLSearchParams(location.search).get("itemId")
    console.log("Resource ID is: " + itemId)
      
      
      
    const fetchProduct = async () => {
    try {
        const response = await fetch(`https://striveschool-api.herokuapp.com/api/product/${itemId}`, {
            method: "GET",
            headers: {
              "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MTgyOGY4NmFhY2FhMjAwMTU1MmExODAiLCJpYXQiOjE2MzU5NDYzNzQsImV4cCI6MTYzNzE1NTk3NH0.6imtX9f9iWxIVzzBvcrBsauI1w-Q-CwrEhE3jWo_i88",
            }
        })
        const product = await response.json()
        itemData(product)
    } catch (error) {
        console.error(error)
    }
}

const itemData =({ name, description, price, brand, _id, imageUrl, createdAt, updatedAt}) =>{
 const container = document.querySelector(".item-details")
 container.innerHTML = `
 <div class="card h-50">
  <img src="${imageUrl}" class="card-img-top" alt="...">
  <div class="card-body">
    <h5 class="card-title">${name}</h5>
    <p class="card-text">${description}</p>
    
<a class="btn btn-outline-success w-100" href="./backOffice.html?itemId=${itemId}">Edit Product</a>
          

  </div>
</div>
`
}
fetchProduct();  

        //     const submitBtn = document.querySelector("button[type='submit']")

        //     if (eventId) {
        //         document.getElementById("subtitle").innerText = " — Edit Event"
        //         submitBtn.querySelector("span").innerText = "Edit Event"
        //         submitBtn.classList.add("btn-success")

        //         document.getElementById("delete-btn").classList.remove("d-none") // reveals the delete button only in the event of being in the "edit mode"

        //         const response = await fetch(endpoint)
        //         const eventDetails = await response.json() // retrieves data object about the specific record we are editing

        //         //populates the input fields with the data coming from the fetch
        //         document.getElementById("name").value = eventDetails.name
        //         document.getElementById("description").value = eventDetails.description
        //         document.getElementById("price").value = eventDetails.price
        //         document.getElementById("time").value = eventDetails.time.split(".")[0]

        //     } else {
        //         document.getElementById("subtitle").innerText = " — Create an Event"
        //         submitBtn.classList.add("btn-primary")
        //     }
        // }

 

</script>

   
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF" crossorigin="anonymous"></script>

  
  </body>
</html>